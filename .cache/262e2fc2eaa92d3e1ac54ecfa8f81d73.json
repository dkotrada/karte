{"dependencies":[{"name":"depd","loc":{"line":10,"column":24}},{"name":"keygrip","loc":{"line":11,"column":22}},{"name":"http","loc":{"line":12,"column":19}}],"generated":{"js":"\"use strict\";var e=require(\"depd\")(\"cookies\"),t=require(\"keygrip\"),i=require(\"http\"),s={},r=/^[\\u0009\\u0020-\\u007e\\u0080-\\u00ff]+$/,o=/^(?:lax|strict)$/i;function n(i,s,r){if(!(this instanceof n))return new n(i,s,r);this.secure=void 0,this.request=i,this.response=s,r&&(Array.isArray(r)?(e('\"keys\" argument; provide using options {\"keys\": [...]}'),this.keys=new t(r)):r.constructor&&\"Keygrip\"===r.constructor.name?(e('\"keys\" argument; provide using options {\"keys\": keygrip}'),this.keys=r):(this.keys=Array.isArray(r.keys)?new t(r.keys):r.keys,this.secure=r.secure))}function a(e,t,i){if(!r.test(e))throw new TypeError(\"argument name is invalid\");if(t&&!r.test(t))throw new TypeError(\"argument value is invalid\");t||(this.expires=new Date(0)),this.name=e,this.value=t||\"\";for(var e in i)this[e]=i[e];if(this.path&&!r.test(this.path))throw new TypeError(\"option path is invalid\");if(this.domain&&!r.test(this.domain))throw new TypeError(\"option domain is invalid\");if(this.sameSite&&!0!==this.sameSite&&!o.test(this.sameSite))throw new TypeError(\"option sameSite is invalid\")}function u(e){return s[e]?s[e]:s[e]=new RegExp(\"(?:^|;) *\"+e.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g,\"\\\\$&\")+\"=([^;]*)\")}function p(e,t){return t.overwrite&&(e=e.filter(function(e){return 0!==e.indexOf(t.name+\"=\")})),e.push(t.toHeader()),e}n.prototype.get=function(e,t){var i,s,r,o,n,a,p=e+\".sig\",h=t&&void 0!==t.signed?t.signed:!!this.keys;if((i=this.request.headers.cookie)&&(s=i.match(u(e)))){if(r=s[1],!t||!h)return r;if(o=this.get(p)){if(n=e+\"=\"+r,!this.keys)throw new Error(\".keys required for signed cookies\");if(!((a=this.keys.index(n,o))<0))return a&&this.set(p,this.keys.sign(n),{signed:!1}),r;this.set(p,null,{path:\"/\",signed:!1})}}},n.prototype.set=function(t,s,r){var o=this.response,n=this.request,u=o.getHeader(\"Set-Cookie\")||[],h=void 0!==this.secure?!!this.secure:\"https\"===n.protocol||n.connection.encrypted,c=new a(t,s,r),y=r&&void 0!==r.signed?r.signed:!!this.keys;if(\"string\"==typeof u&&(u=[u]),!h&&r&&r.secure)throw new Error(\"Cannot send secure cookie over unencrypted connection\");if(c.secure=h,r&&\"secure\"in r&&(c.secure=r.secure),r&&\"secureProxy\"in r&&(e('\"secureProxy\" option; use \"secure\" option, provide \"secure\" to constructor if needed'),c.secure=r.secureProxy),u=p(u,c),r&&y){if(!this.keys)throw new Error(\".keys required for signed cookies\");c.value=this.keys.sign(c.toString()),c.name+=\".sig\",u=p(u,c)}return(o.set?i.OutgoingMessage.prototype.setHeader:o.setHeader).call(o,\"Set-Cookie\",u),this},a.prototype.path=\"/\",a.prototype.expires=void 0,a.prototype.domain=void 0,a.prototype.httpOnly=!0,a.prototype.sameSite=!1,a.prototype.secure=!1,a.prototype.overwrite=!1,a.prototype.toString=function(){return this.name+\"=\"+this.value},a.prototype.toHeader=function(){var e=this.toString();return this.maxAge&&(this.expires=new Date(Date.now()+this.maxAge)),this.path&&(e+=\"; path=\"+this.path),this.expires&&(e+=\"; expires=\"+this.expires.toUTCString()),this.domain&&(e+=\"; domain=\"+this.domain),this.sameSite&&(e+=\"; samesite=\"+(!0===this.sameSite?\"strict\":this.sameSite.toLowerCase())),this.secure&&(e+=\"; secure\"),this.httpOnly&&(e+=\"; httponly\"),e},Object.defineProperty(a.prototype,\"maxage\",{configurable:!0,enumerable:!0,get:function(){return this.maxAge},set:function(e){return this.maxAge=e}}),e.property(a.prototype,\"maxage\",'\"maxage\"; use \"maxAge\" instead'),n.connect=n.express=function(e){return function(t,i,s){t.cookies=i.cookies=new n(t,i,{keys:e}),s()}},n.Cookie=a,module.exports=n;"},"hash":"dc4febe9bbae3daf6b3608f03036d487"}