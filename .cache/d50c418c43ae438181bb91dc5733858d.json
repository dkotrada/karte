{"dependencies":[{"name":"ee-first","loc":{"line":23,"column":20}},{"name":"process"}],"generated":{"js":"var process = require(\"process\");\nvar e=require(\"process\");module.exports=i,module.exports.isFinished=t;var n=require(\"ee-first\"),o=\"function\"==typeof setImmediate?setImmediate:function(n){e.nextTick(n.bind.apply(n,arguments))};function i(e,n){return!1!==t(e)?(o(n,null,e),e):(r(e,n),e)}function t(e){var n=e.socket;return\"boolean\"==typeof e.finished?Boolean(e.finished||n&&!n.writable):\"boolean\"==typeof e.complete?Boolean(e.upgrade||!n||!n.readable||e.complete&&!e.readable):void 0}function u(e,o){var i,t,u=!1;function r(e){i.cancel(),t.cancel(),u=!0,o(e)}function c(o){e.removeListener(\"socket\",c),u||i===t&&(t=n([[o,\"error\",\"close\"]],r))}i=t=n([[e,\"end\",\"finish\"]],r),e.socket?c(e.socket):(e.on(\"socket\",c),void 0===e.socket&&s(e,c))}function r(e,n){var o=e.__onFinished;o&&o.queue||(o=e.__onFinished=c(e),u(e,o)),o.queue.push(n)}function c(e){function n(o){if(e.__onFinished===n&&(e.__onFinished=null),n.queue){var i=n.queue;n.queue=null;for(var t=0;t<i.length;t++)i[t](o,e)}}return n.queue=[],n}function s(e,n){var o=e.assignSocket;\"function\"==typeof o&&(e.assignSocket=function(e){o.call(this,e),n(e)})}"},"hash":"28982130fe1d3ff3c3bedf02dc26afdc"}