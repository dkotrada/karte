{"dependencies":[{"name":"finalhandler","loc":{"line":16,"column":27}},{"name":"./router","loc":{"line":17,"column":21}},{"name":"methods","loc":{"line":18,"column":22}},{"name":"./middleware/init","loc":{"line":19,"column":25}},{"name":"./middleware/query","loc":{"line":20,"column":20}},{"name":"debug","loc":{"line":21,"column":20}},{"name":"./view","loc":{"line":22,"column":19}},{"name":"http","loc":{"line":23,"column":19}},{"name":"./utils","loc":{"line":26,"column":27}},{"name":"depd","loc":{"line":27,"column":24}},{"name":"array-flatten","loc":{"line":28,"column":22}},{"name":"utils-merge","loc":{"line":29,"column":20}},{"name":"path","loc":{"line":30,"column":22}},{"name":"setprototypeof","loc":{"line":31,"column":29}}],"generated":{"js":"\"use strict\";var e=require(\"finalhandler\"),t=require(\"./router\"),r=require(\"methods\"),i=require(\"./middleware/init\"),s=require(\"./middleware/query\"),n=require(\"debug\")(\"express:application\"),o=require(\"./view\"),u=require(\"http\"),a=require(\"./utils\").compileETag,h=require(\"./utils\").compileQueryParser,l=require(\"./utils\").compileTrust,c=require(\"depd\")(\"express\"),p=require(\"array-flatten\"),f=require(\"utils-merge\"),d=require(\"path\").resolve,g=require(\"setprototypeof\"),y=Array.prototype.slice,v=exports=module.exports={},w=\"@@symbol:trust_proxy_default\";function b(e){this.get(\"env\")}function q(e,t,r){try{e.render(t,r)}catch(e){r(e)}}v.init=function(){this.cache={},this.engines={},this.settings={},this.defaultConfiguration()},v.defaultConfiguration=function(){var e=\"production\";this.enable(\"x-powered-by\"),this.set(\"etag\",\"weak\"),this.set(\"env\",e),this.set(\"query parser\",\"extended\"),this.set(\"subdomain offset\",2),this.set(\"trust proxy\",!1),Object.defineProperty(this.settings,w,{configurable:!0,value:!0}),n(\"booting in %s mode\",e),this.on(\"mount\",function(e){!0===this.settings[w]&&\"function\"==typeof e.settings[\"trust proxy fn\"]&&(delete this.settings[\"trust proxy\"],delete this.settings[\"trust proxy fn\"]),g(this.request,e.request),g(this.response,e.response),g(this.engines,e.engines),g(this.settings,e.settings)}),this.locals=Object.create(null),this.mountpath=\"/\",this.locals.settings=this.settings,this.set(\"view\",o),this.set(\"views\",d(\"views\")),this.set(\"jsonp callback name\",\"callback\"),this.enable(\"view cache\"),Object.defineProperty(this,\"router\",{get:function(){throw new Error(\"'app.router' is deprecated!\\nPlease see the 3.x to 4.x migration guide for details on how to update your app.\")}})},v.lazyrouter=function(){this._router||(this._router=new t({caseSensitive:this.enabled(\"case sensitive routing\"),strict:this.enabled(\"strict routing\")}),this._router.use(s(this.get(\"query parser fn\"))),this._router.use(i.init(this)))},v.handle=function(t,r,i){var s=this._router,o=i||e(t,r,{env:this.get(\"env\"),onerror:b.bind(this)});if(!s)return n(\"no routes defined on app\"),void o();s.handle(t,r,o)},v.use=function(e){var t=0,r=\"/\";if(\"function\"!=typeof e){for(var i=e;Array.isArray(i)&&0!==i.length;)i=i[0];\"function\"!=typeof i&&(t=1,r=e)}var s=p(y.call(arguments,t));if(0===s.length)throw new TypeError(\"app.use() requires a middleware function\");this.lazyrouter();var o=this._router;return s.forEach(function(e){if(!e||!e.handle||!e.set)return o.use(r,e);n(\".use app under %s\",r),e.mountpath=r,e.parent=this,o.use(r,function(t,r,i){var s=t.app;e.handle(t,r,function(e){g(t,s.request),g(r,s.response),i(e)})}),e.emit(\"mount\",this)},this),this},v.route=function(e){return this.lazyrouter(),this._router.route(e)},v.engine=function(e,t){if(\"function\"!=typeof t)throw new Error(\"callback function required\");var r=\".\"!==e[0]?\".\"+e:e;return this.engines[r]=t,this},v.param=function(e,t){if(this.lazyrouter(),Array.isArray(e)){for(var r=0;r<e.length;r++)this.param(e[r],t);return this}return this._router.param(e,t),this},v.set=function(e,t){if(1===arguments.length)return this.settings[e];switch(n('set \"%s\" to %o',e,t),this.settings[e]=t,e){case\"etag\":this.set(\"etag fn\",a(t));break;case\"query parser\":this.set(\"query parser fn\",h(t));break;case\"trust proxy\":this.set(\"trust proxy fn\",l(t)),Object.defineProperty(this.settings,w,{configurable:!0,value:!1})}return this},v.path=function(){return this.parent?this.parent.path()+this.mountpath:\"\"},v.enabled=function(e){return Boolean(this.set(e))},v.disabled=function(e){return!this.set(e)},v.enable=function(e){return this.set(e,!0)},v.disable=function(e){return this.set(e,!1)},r.forEach(function(e){v[e]=function(t){if(\"get\"===e&&1===arguments.length)return this.set(t);this.lazyrouter();var r=this._router.route(t);return r[e].apply(r,y.call(arguments,1)),this}}),v.all=function(e){this.lazyrouter();for(var t=this._router.route(e),i=y.call(arguments,1),s=0;s<r.length;s++)t[r[s]].apply(t,i);return this},v.del=c.function(v.delete,\"app.del: Use app.delete instead\"),v.render=function(e,t,r){var i,s=this.cache,n=r,o=this.engines,u=t,a={};if(\"function\"==typeof t&&(n=t,u={}),f(a,this.locals),u._locals&&f(a,u._locals),f(a,u),null==a.cache&&(a.cache=this.enabled(\"view cache\")),a.cache&&(i=s[e]),!i){if(!(i=new(this.get(\"view\"))(e,{defaultEngine:this.get(\"view engine\"),root:this.get(\"views\"),engines:o})).path){var h=Array.isArray(i.root)&&i.root.length>1?'directories \"'+i.root.slice(0,-1).join('\", \"')+'\" or \"'+i.root[i.root.length-1]+'\"':'directory \"'+i.root+'\"',l=new Error('Failed to lookup view \"'+e+'\" in views '+h);return l.view=i,n(l)}a.cache&&(s[e]=i)}q(i,a,n)},v.listen=function(){var e=u.createServer(this);return e.listen.apply(e,arguments)};"},"hash":"c9fdb29eead73b1c0826dd54cba43883"}