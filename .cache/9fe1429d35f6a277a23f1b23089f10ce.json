{"dependencies":[{"name":"fs","loc":{"line":43,"column":17}},{"name":"fs.realpath","loc":{"line":44,"column":17}},{"name":"minimatch","loc":{"line":45,"column":24}},{"name":"inherits","loc":{"line":47,"column":23}},{"name":"events","loc":{"line":48,"column":17}},{"name":"path","loc":{"line":49,"column":19}},{"name":"assert","loc":{"line":50,"column":21}},{"name":"path-is-absolute","loc":{"line":51,"column":25}},{"name":"./sync.js","loc":{"line":52,"column":23}},{"name":"./common.js","loc":{"line":53,"column":21}},{"name":"inflight","loc":{"line":58,"column":23}},{"name":"util","loc":{"line":59,"column":19}},{"name":"once","loc":{"line":63,"column":19}},{"name":"process"}],"generated":{"js":"var process = require(\"process\");\nvar t=require(\"process\");module.exports=E;var i=require(\"fs\"),e=require(\"fs.realpath\"),r=require(\"minimatch\"),s=r.Minimatch,a=require(\"inherits\"),n=require(\"events\").EventEmitter,h=require(\"path\"),o=require(\"assert\"),c=require(\"path-is-absolute\"),u=require(\"./sync.js\"),f=require(\"./common.js\"),p=f.alphasort,l=f.alphasorti,d=f.setopts,_=f.ownProp,m=require(\"inflight\"),v=require(\"util\"),y=f.childrenIgnored,b=f.isIgnored,g=require(\"once\");function E(t,i,e){if(\"function\"==typeof i&&(e=i,i={}),i||(i={}),i.sync){if(e)throw new TypeError(\"callback provided to sync glob\");return u(t,i)}return new w(t,i,e)}E.sync=u;var k=E.GlobSync=u.GlobSync;function A(t,i){if(null===i||\"object\"!=typeof i)return t;for(var e=Object.keys(i),r=e.length;r--;)t[e[r]]=i[e[r]];return t}function w(i,e,r){if(\"function\"==typeof e&&(r=e,e=null),e&&e.sync){if(r)throw new TypeError(\"callback provided to sync glob\");return new k(i,e)}if(!(this instanceof w))return new w(i,e,r);d(this,i,e),this._didRealPath=!1;var s=this.minimatch.set.length;this.matches=new Array(s),\"function\"==typeof r&&(r=g(r),this.on(\"error\",r),this.on(\"end\",function(t){r(null,t)}));var a=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(0===s)return o();for(var n=!0,h=0;h<s;h++)this._process(this.minimatch.set[h],h,!1,o);function o(){--a._processing,a._processing<=0&&(n?t.nextTick(function(){a._finish()}):a._finish())}n=!1}function I(t,i,e){return function(r,s){r?t._readdirError(i,r,e):t._readdirEntries(i,s,e)}}E.glob=E,E.hasMagic=function(t,i){var e=A({},i);e.noprocess=!0;var r=new w(t,e).minimatch.set;if(!t)return!1;if(r.length>1)return!0;for(var s=0;s<r[0].length;s++)if(\"string\"!=typeof r[0][s])return!0;return!1},E.Glob=w,a(w,n),w.prototype._finish=function(){if(o(this instanceof w),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();f.finish(this),this.emit(\"end\",this.found)}},w.prototype._realpath=function(){if(!this._didRealpath){this._didRealpath=!0;var t=this.matches.length;if(0===t)return this._finish();for(var i=this,e=0;e<this.matches.length;e++)this._realpathSet(e,r)}function r(){0==--t&&i._finish()}},w.prototype._realpathSet=function(t,i){var r=this.matches[t];if(!r)return i();var s=Object.keys(r),a=this,n=s.length;if(0===n)return i();var h=this.matches[t]=Object.create(null);s.forEach(function(r,s){r=a._makeAbs(r),e.realpath(r,a.realpathCache,function(e,s){e?\"stat\"===e.syscall?h[r]=!0:a.emit(\"error\",e):h[s]=!0,0==--n&&(a.matches[t]=h,i())})})},w.prototype._mark=function(t){return f.mark(this,t)},w.prototype._makeAbs=function(t){return f.makeAbs(this,t)},w.prototype.abort=function(){this.aborted=!0,this.emit(\"abort\")},w.prototype.pause=function(){this.paused||(this.paused=!0,this.emit(\"pause\"))},w.prototype.resume=function(){if(this.paused){if(this.emit(\"resume\"),this.paused=!1,this._emitQueue.length){var t=this._emitQueue.slice(0);this._emitQueue.length=0;for(var i=0;i<t.length;i++){var e=t[i];this._emitMatch(e[0],e[1])}}if(this._processQueue.length){var r=this._processQueue.slice(0);this._processQueue.length=0;for(i=0;i<r.length;i++){var s=r[i];this._processing--,this._process(s[0],s[1],s[2],s[3])}}}},w.prototype._process=function(t,i,e,s){if(o(this instanceof w),o(\"function\"==typeof s),!this.aborted)if(this._processing++,this.paused)this._processQueue.push([t,i,e,s]);else{for(var a,n=0;\"string\"==typeof t[n];)n++;switch(n){case t.length:return void this._processSimple(t.join(\"/\"),i,s);case 0:a=null;break;default:a=t.slice(0,n).join(\"/\")}var h,u=t.slice(n);null===a?h=\".\":c(a)||c(t.join(\"/\"))?(a&&c(a)||(a=\"/\"+a),h=a):h=a;var f=this._makeAbs(h);if(y(this,h))return s();u[0]===r.GLOBSTAR?this._processGlobStar(a,h,f,u,i,e,s):this._processReaddir(a,h,f,u,i,e,s)}},w.prototype._processReaddir=function(t,i,e,r,s,a,n){var h=this;this._readdir(e,a,function(o,c){return h._processReaddir2(t,i,e,r,s,a,c,n)})},w.prototype._processReaddir2=function(t,i,e,r,s,a,n,o){if(!n)return o();for(var c=r[0],u=!!this.minimatch.negate,f=c._glob,p=this.dot||\".\"===f.charAt(0),l=[],d=0;d<n.length;d++){if(\".\"!==(m=n[d]).charAt(0)||p)(u&&!t?!m.match(c):m.match(c))&&l.push(m)}var _=l.length;if(0===_)return o();if(1===r.length&&!this.mark&&!this.stat){this.matches[s]||(this.matches[s]=Object.create(null));for(d=0;d<_;d++){var m=l[d];t&&(m=\"/\"!==t?t+\"/\"+m:t+m),\"/\"!==m.charAt(0)||this.nomount||(m=h.join(this.root,m)),this._emitMatch(s,m)}return o()}r.shift();for(d=0;d<_;d++){m=l[d];t&&(m=\"/\"!==t?t+\"/\"+m:t+m),this._process([m].concat(r),s,a,o)}o()},w.prototype._emitMatch=function(t,i){if(!this.aborted&&!b(this,i))if(this.paused)this._emitQueue.push([t,i]);else{var e=c(i)?i:this._makeAbs(i);if(this.mark&&(i=this._mark(i)),this.absolute&&(i=e),!this.matches[t][i]){if(this.nodir){var r=this.cache[e];if(\"DIR\"===r||Array.isArray(r))return}this.matches[t][i]=!0;var s=this.statCache[e];s&&this.emit(\"stat\",i,s),this.emit(\"match\",i)}}},w.prototype._readdirInGlobStar=function(t,e){if(!this.aborted){if(this.follow)return this._readdir(t,!1,e);var r=this,s=m(\"lstat\\0\"+t,function(i,s){if(i&&\"ENOENT\"===i.code)return e();var a=s&&s.isSymbolicLink();r.symlinks[t]=a,a||!s||s.isDirectory()?r._readdir(t,!1,e):(r.cache[t]=\"FILE\",e())});s&&i.lstat(t,s)}},w.prototype._readdir=function(t,e,r){if(!this.aborted&&(r=m(\"readdir\\0\"+t+\"\\0\"+e,r))){if(e&&!_(this.symlinks,t))return this._readdirInGlobStar(t,r);if(_(this.cache,t)){var s=this.cache[t];if(!s||\"FILE\"===s)return r();if(Array.isArray(s))return r(null,s)}i.readdir(t,I(this,t,r))}},w.prototype._readdirEntries=function(t,i,e){if(!this.aborted){if(!this.mark&&!this.stat)for(var r=0;r<i.length;r++){var s=i[r];s=\"/\"===t?t+s:t+\"/\"+s,this.cache[s]=!0}return this.cache[t]=i,e(null,i)}},w.prototype._readdirError=function(t,i,e){if(!this.aborted){switch(i.code){case\"ENOTSUP\":case\"ENOTDIR\":var r=this._makeAbs(t);if(this.cache[r]=\"FILE\",r===this.cwdAbs){var s=new Error(i.code+\" invalid cwd \"+this.cwd);s.path=this.cwd,s.code=i.code,this.emit(\"error\",s),this.abort()}break;case\"ENOENT\":case\"ELOOP\":case\"ENAMETOOLONG\":case\"UNKNOWN\":this.cache[this._makeAbs(t)]=!1;break;default:this.cache[this._makeAbs(t)]=!1,this.strict&&(this.emit(\"error\",i),this.abort()),this.silent}return e()}},w.prototype._processGlobStar=function(t,i,e,r,s,a,n){var h=this;this._readdir(e,a,function(o,c){h._processGlobStar2(t,i,e,r,s,a,c,n)})},w.prototype._processGlobStar2=function(t,i,e,r,s,a,n,h){if(!n)return h();var o=r.slice(1),c=t?[t]:[],u=c.concat(o);this._process(u,s,!1,h);var f=this.symlinks[e],p=n.length;if(f&&a)return h();for(var l=0;l<p;l++){if(\".\"!==n[l].charAt(0)||this.dot){var d=c.concat(n[l],o);this._process(d,s,!0,h);var _=c.concat(n[l],r);this._process(_,s,!0,h)}}h()},w.prototype._processSimple=function(t,i,e){var r=this;this._stat(t,function(s,a){r._processSimple2(t,i,s,a,e)})},w.prototype._processSimple2=function(i,e,r,s,a){if(this.matches[e]||(this.matches[e]=Object.create(null)),!s)return a();if(i&&c(i)&&!this.nomount){var n=/[\\/\\\\]$/.test(i);\"/\"===i.charAt(0)?i=h.join(this.root,i):(i=h.resolve(this.root,i),n&&(i+=\"/\"))}\"win32\"===t.platform&&(i=i.replace(/\\\\/g,\"/\")),this._emitMatch(e,i),a()},w.prototype._stat=function(t,e){var r=this._makeAbs(t),s=\"/\"===t.slice(-1);if(t.length>this.maxLength)return e();if(!this.stat&&_(this.cache,r)){var a=this.cache[r];if(Array.isArray(a)&&(a=\"DIR\"),!s||\"DIR\"===a)return e(null,a);if(s&&\"FILE\"===a)return e()}var n=this.statCache[r];if(void 0!==n){if(!1===n)return e(null,n);var h=n.isDirectory()?\"DIR\":\"FILE\";return s&&\"FILE\"===h?e():e(null,h,n)}var o=this,c=m(\"stat\\0\"+r,function(s,a){if(a&&a.isSymbolicLink())return i.stat(r,function(i,s){i?o._stat2(t,r,null,a,e):o._stat2(t,r,i,s,e)});o._stat2(t,r,s,a,e)});c&&i.lstat(r,c)},w.prototype._stat2=function(t,i,e,r,s){if(e&&(\"ENOENT\"===e.code||\"ENOTDIR\"===e.code))return this.statCache[i]=!1,s();var a=\"/\"===t.slice(-1);if(this.statCache[i]=r,\"/\"===i.slice(-1)&&r&&!r.isDirectory())return s(null,!1,r);var n=!0;return r&&(n=r.isDirectory()?\"DIR\":\"FILE\"),this.cache[i]=this.cache[i]||n,a&&\"FILE\"===n?s():s(null,n,r)};"},"hash":"956d355052d3e7d7ef43ff3e89cbed38"}