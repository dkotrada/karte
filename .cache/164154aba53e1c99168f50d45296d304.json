{"dependencies":[{"name":"./document","loc":{"line":5,"column":29}},{"name":"events","loc":{"line":6,"column":27}},{"name":"./error","loc":{"line":14,"column":27}},{"name":"./schema","loc":{"line":8,"column":21}},{"name":"./types/objectid","loc":{"line":9,"column":23}},{"name":"./utils","loc":{"line":10,"column":20}},{"name":"./internal","loc":{"line":12,"column":28}},{"name":"./promise_provider","loc":{"line":13,"column":30}},{"name":"./types/embedded","loc":{"line":127,"column":33}},{"name":"process"}],"generated":{"js":"var process = require(\"process\");\nvar e,t=require(\"process\"),r=require(\"./document\"),i=require(\"events\").EventEmitter,o=require(\"./error\"),s=require(\"./schema\"),n=require(\"./types/objectid\"),p=require(\"./utils\"),c=o.ValidationError,a=require(\"./internal\"),h=require(\"./promise_provider\"),l=require(\"./error\").VersionError;function u(e,t,r,c,h){if(!(this instanceof u))return new u(e,t,r,c,h);if(p.isObject(t)&&!t.instanceOfSchema&&(t=new s(t)),t=this.schema||t,!this.schema&&t.options._id&&void 0===(e=e||{})._id&&(e._id=new n),!t)throw new o.MissingSchemaError;this.$__setSchema(t),this.$__=new a,this.$__.emitter=new i,this.isNew=!0,this.errors=void 0,\"boolean\"==typeof r?(this.$__.strictMode=r,r=void 0):(this.$__.strictMode=this.schema.options&&this.schema.options.strict,this.$__.selected=r);for(var l=this.schema.requiredPaths(),f=0;f<l.length;++f)this.$__.activePaths.require(l[f]);this.$__.emitter.setMaxListeners(0),this._doc=this.$__buildDoc(e,r,c),!h&&e&&this.init(e),this.$__registerHooksFromSchema();for(var d in t.methods)this[d]=t.methods[d];for(var _ in t.statics)this[_]=t.statics[_]}u.prototype=Object.create(r.prototype),u.prototype.constructor=u,u.$emitter=new i,p.each([\"on\",\"once\",\"emit\",\"listeners\",\"removeListener\",\"setMaxListeners\",\"removeAllListeners\",\"addListener\"],function(e){u[e]=function(){return u.$emitter[e].apply(u.$emitter,arguments)}}),u.prototype.$__registerHooksFromSchema=function(){e=e||require(\"./types/embedded\");var r,i,o,s,n,p,c=h.get(),a=this,u=a.schema&&a.schema.callQueue;if(!u.length)return a;var f,d={post:[]};for(o=0;o<u.length;++o)if(\"pre\"===(f=u[o])[0]||\"post\"===f[0]||\"on\"===f[0]){var _=[].slice.call(f[1]);(n=\"on\"===f[0]?\"post\":_[0])in d||(d[n]={post:[],pre:[]}),\"post\"===f[0]?d[n].post.push(_):\"on\"===f[0]?d[n].push(_):d[n].pre.push(_)}else a[f[0]].apply(a,f[1]);for(d.post.length,d.post.forEach(function(e){a.on.apply(a,e)}),delete d.post,d.init&&a instanceof e?(d.init.pre&&d.init.pre.forEach(function(e){a.$pre.apply(a,e)}),d.init.post&&d.init.post.forEach(function(e){a.$post.apply(a,e)}),delete d.init):d.set&&(d.set.pre&&d.set.pre.forEach(function(e){a.$pre.apply(a,e)}),d.set.post&&d.set.post.forEach(function(e){a.$post.apply(a,e)}),delete d.set),i=(p=Object.keys(d)).length,o=0;o<i;++o){var m=\"$__original_\"+(n=p[o]);if(a[n]&&!a[n].$isWrapped){a[m]=a[n],a[n]=function(e){return function(){var r,i,o=[].slice.call(arguments),s=o.pop(),n=new Error;s&&\"function\"!=typeof s?o.push(s):r=s;var p=new c.ES6(function(t,r){o.push(function(e){if(e)return e instanceof l&&(e.stack=n.stack),a.$__handleReject(e),void r(e);i=Array.prototype.slice.call(arguments,1),t.apply(p,i)}),a[e].apply(a,o)});return r?(a.constructor.$wrapCallback&&(r=a.constructor.$wrapCallback(r)),p.then(function(){t.nextTick(function(){r.apply(null,[null].concat(i))})},function(e){t.nextTick(function(){r(e)})})):p}}(m),a[n].$isWrapped=!0;var $=(r=d[n]).pre.length;for(s=0;s<$;++s)(_=r.pre[s])[0]=m,a.$pre.apply(a,_);for($=r.post.length,s=0;s<$;++s)(_=r.post[s])[0]=m,a.$post.apply(a,_)}}return a},u.ValidationError=c,module.exports=exports=u;"},"hash":"28e9fd00bd7f59bfedf13c809032f630"}