{"dependencies":[{"name":"bytes","loc":{"line":15,"column":20}},{"name":"content-type","loc":{"line":16,"column":26}},{"name":"http-errors","loc":{"line":17,"column":26}},{"name":"debug","loc":{"line":18,"column":20}},{"name":"../read","loc":{"line":19,"column":19}},{"name":"type-is","loc":{"line":20,"column":21}}],"generated":{"js":"\"use strict\";var r=require(\"bytes\"),e=require(\"content-type\"),t=require(\"http-errors\"),n=require(\"debug\")(\"body-parser:json\"),i=require(\"../read\"),o=require(\"type-is\");module.exports=s;var a=/^[\\x20\\x09\\x0a\\x0d]*(.)/;function s(e){var a=e||{},s=\"number\"!=typeof a.limit?r.parse(a.limit||\"100kb\"):a.limit,d=!1!==a.inflate,v=a.reviver,h=!1!==a.strict,l=a.type||\"application/json\",b=a.verify||!1;if(!1!==b&&\"function\"!=typeof b)throw new TypeError(\"option verify must be function\");var m=\"function\"!=typeof l?y(l):l;function g(r){if(0===r.length)return{};if(h){var e=c(r);if(\"{\"!==e&&\"[\"!==e)throw n(\"strict violation\"),u(r,e)}try{return n(\"parse json\"),JSON.parse(r,v)}catch(r){throw f(r,{stack:r.stack})}}return function(r,e,a){if(r._body)return n(\"body already parsed\"),void a();if(r.body=r.body||{},!o.hasBody(r))return n(\"skip empty body\"),void a();if(n(\"content-type %j\",r.headers[\"content-type\"]),!m(r))return n(\"skip parsing\"),void a();var u=p(r)||\"utf-8\";if(\"utf-\"!==u.substr(0,4))return n(\"invalid charset\"),void a(t(415,'unsupported charset \"'+u.toUpperCase()+'\"',{charset:u,type:\"charset.unsupported\"}));i(r,e,a,g,n,{encoding:u,inflate:d,limit:s,verify:b})}}function u(r,e){var t=r.indexOf(e),n=r.substring(0,t)+\"#\";try{throw JSON.parse(n),new SyntaxError(\"strict violation\")}catch(r){return f(r,{message:r.message.replace(\"#\",e),stack:r.stack})}}function c(r){return a.exec(r)[1]}function p(r){try{return(e.parse(r).parameters.charset||\"\").toLowerCase()}catch(r){return}}function f(r,e){for(var t=Object.getOwnPropertyNames(r),n=0;n<t.length;n++){var i=t[n];\"stack\"!==i&&\"message\"!==i&&delete r[i]}for(var o=Object.keys(e),a=0;a<o.length;a++){var s=o[a];r[s]=e[s]}return r}function y(r){return function(e){return Boolean(o(e,r))}}"},"hash":"b734ad0da896ad7ed36db7f654e9b5ab"}